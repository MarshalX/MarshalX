{"componentChunkName":"component---src-templates-post-jsx","path":"/blog/post/istoriya-revyu-zoom-us-bot","result":{"data":{"prismicPost":{"id":"Prismic__Post__XqXpBBEAACMAcLQJ","uid":"istoriya-revyu-zoom-us-bot","first_publication_date":"2020-04-26T20:04:19+0000","last_publication_date":"2020-04-26T20:04:19+0000","data":{"title":{"text":"История ревью @zoom_us_bot"},"description":"17 апреля моё приложение опубликовали в Zoom Marketplace. Тогда я сказал, что поделюсь с Вами этапами прохождения модерации у них.\n\nДля начала необходимо освежить память и вспомнить то, что нужно для того, чтобы приложение опубликовали: перечень.","date":"26.04.2020","categories":[{"category":{"document":[{"id":"Prismic__Category__Xor2ExAAACIAtY1w","uid":"zoom-telegram-integration","data":{"name":"Zoom Telegram Integration"}}]}}],"body":[{"__typename":"PrismicPostBodyText","slice_type":"text","id":"Prismic__PostBodyText__Prismic__Post__XqXpBBEAACMAcLQJ__body__0","primary":{"text":{"html":"<p>17 апреля моё приложение опубликовали в<em> Zoom Marketplace</em>. <a  href=\"https://t.me/MarshalC/574\">Тогда</a> я сказал, что поделюсь с Вами этапами прохождения модерации у них.</p><p>Для начала необходимо освежить память и вспомнить то, что нужно для того, чтобы приложение опубликовали: <a  href=\"https://t.me/MarshalC/561\">перечень</a>.</p><h2>0 ревью</h2><p>Выполнив обязательный пункты из перечня я заслал приложение 3-4 апреля. 5-6 меня моментально отклонили с ссылкой на заполнения договора - разрешение на тестирования моего приложения специалистами <em>Zoom&#39;a</em>. Документ был полностью электронный, подпись тоже. Не знаю использовался ли это стартап челика с последнего видео Юрия Дудя, но с цифровой подписью я столкнулся раньше, чем Дудь.</p><p>Процедура была элементарной: перейти по ссылке из объяснения отклонения, пару полей заполнить и кнопку нажать. Единственное что там было эдакое - термин из английского, который вне документа переводится иначе. Это я нагуглил (термин забыл, простите). Там про то,  на кого документ высылать с моей стороны.</p><h2>1 ревью</h2><p>Прошло оно 8 числа. Для моего проекта завели <em>Google Doc</em>. </p><p><strong>Не понравилась страница с контактной информацией</strong> (это был внизу лендинга). Попросили отдельную страницу сделать из-за того, что контакты необходимо искать. Так же скинули ссылку на ещё один документ - <em>Zoom’s Best Practices for Organizing Your App’s Support URL Content</em>.</p><p>Я сделал отдельную страницу и прошёлся по пунктам из их рекомендаций.</p><p>Ссылка на документацию. Несмотря на то, что это поле <em>optional</em>, я не стал спорить и сделал страницу, которая в формате презентации (скрин - комментарий) демонстрирует все возможности бота (такой же подход у приложений от них самих).</p><p><strong>Scopes</strong>. Приложение <em>OAuth</em>, есть перечень разрешений, которые я запрашивал для приложения. Как оказалось, нет необходимости запрашивать на чтение и на запись, потому что запросив на запись ты получаешь чтение. Более того, у них несколько одинаковых скоупов есть в которых я запутался (может поддержка легаси) и выбрал несколько. В общем методом проб я повыключал хлам и оставил самые новые и последние так, чтобы всё работало.</p><p><strong>&quot;Нерабочая&quot; команда</strong>. Я это заметил сам, но не стал править, подумав, что прокатит так. Речь про команду <code class=\"language-text\">/join meetingID</code>. При отправке просто команды <code class=\"language-text\">/join</code> без аргумента выбрасывало из аккаунта из-за неправильного запроса. Тестировщик использовал команду не по ману и уходил в цикл: команда, логаут, логин, команда...</p><p>Добавив обработку пустого арга и нормальную валидацию ошибок с бэка я закрыл этот пункт.</p><h2>2 ревью</h2><p>10 апреля. Тут я начал орать и много им написывать. Изначально в <em>Zoom&#39;e</em> можно было подключиться без пароля. Потом начались рофлы, как многие залетали в рандом комнаты и показывали писюны просто подобрав <em>ID</em>. Благодаря этому каждая конфа стала защищена паролем. Пароль генерируется случайный, даже если не был указан. При генерации ссылки на вход дописывается в параметр аргумент с хешем пароля для валидации.</p><p>Я решил, что было бы неплохо добавить возможность задавать свой пароль. Поэтому в первый аргумент команды <code class=\"language-text\">/zoom</code> и пихнул ввод пароля. Всё работало, теперь пароль задавался мой и отображался в конференции возле времени продолжительности.</p><p>Только вот <em>QA</em> посчитал иначе. Он сказал, что без проблем может зайти по <em>ID</em> конфы без пароля. Что у него его не запрашивает.</p><p>Я протестировал его слова с друзьями, подумал, что может из-за типа &quot;<em>instant meeting</em>&quot; пускает. Однако у моих друзей запрашивало пароль. Тогда я посчитал, что он заходит на другом устройстве с помощью ссылки, что дает бот в кнопке (а там уже введён пароль).</p><p>Тестировщик отрицал, подключил кого-то старше. Всё это происходило в комментариях гугл дока. Я специально сидел ночами чтобы быть в их часовом поясе и быстро отвечать. Он предположил, что это из-за использования <em>PMI</em> (<em>personal meeting id</em>). Ваш постоянный <em>ID</em>, который есть у аккаунта. Все instant meetings будут использовать его. Генерации нового <em>ID</em> не будет.</p><p>Я внёс правки и перестал использовать <em>PMI</em>.</p><h2>3-4 ревью</h2><p><code class=\"language-text\">use_pmi=False</code> не помогло. Он опять заявил, что пускает без пароля. Я доказывал обратное и тогда он мне записал пламенное видео. Где мало того, что с улыбкой махал в вебку, демонстрируя подключения с двух устройств, дык ещё и комментировал все свои действия.</p><p>Я был тронут и перестал бурчать. Чел отлично выполняет свою работу и тратит время на меня. Пошёл читать доку и проводить эксперименты.</p><p>В их <em>API</em> оказалась полная дичь, а дока с косяками. Короче, есть настройка на аккаунт - <em>Use PMI</em>. Она глобальная! Её нельзя потрогать при создании конференции через <em>API</em>, несмотря на то, что там по доке можно изменить всё! Так я разобрался, почему у него при каждом вызове <code class=\"language-text\">/zoom</code> был один и тот же <em>ID</em> (он рассказывал и показывал это в видео, предполагая, что проблема в этом).</p><p>Вообще <em>instant meetings</em> это какие-то неконтролируемые с <em>API</em> вещи. Я только потом заметил, что даже оффициальная интеграция <em>Slack&#39;a</em> с <em>Zoom</em> использует исключительно запланированные конференции с временем начала равным вызову команды.</p><p>Поняв, что у них тут какие-то кекнутые костыли я умыл руки - вырезал нафиг фичу с установкой своего пароля и отправил ещё раз на ревью. Конечно я это не оставил просто так и написал им в саппорт по разработке (ответили продублировав вопрос. Я забил).</p><h2>5 ревью</h2><p>16 апреля. Фичу я вырезал, а скрин в документации не обновил! Да-да, плюс ещё день, чтобы просто поправить 1 картинку, где засветилась возможность установки своего пароля.</p><p>Вот и всё. Я думал, что это будет сложнее ✨</p>"}}}]}},"posts":{"nodes":[{"id":"Prismic__Post__Xqg1KxEAACUAevMp","uid":"moy-preezd-chrome-firefox-vivaldi","data":{"title":{"text":"Мой преезд Chrome -> FireFox -> Vivaldi"},"date":"28.04.2020","categories":[{"category":{"document":[{"id":"Prismic__Category__Xm56SBEAACIACBU1","uid":"mnenie-otnoshenie","data":{"name":"Мнение / Отношение"}}]}}]}},{"id":"Prismic__Post__Xo8ITxAAACIAx7nl","uid":"support","data":{"title":{"text":"Support page"},"date":"09.04.2020","categories":[{"category":{"document":[{"id":"Prismic__Category__Xor2ExAAACIAtY1w","uid":"zoom-telegram-integration","data":{"name":"Zoom Telegram Integration"}}]}}]}}]}},"pageContext":{"uid":"istoriya-revyu-zoom-us-bot"}}}